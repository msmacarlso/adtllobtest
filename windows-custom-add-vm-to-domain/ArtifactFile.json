{
  "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2015-01-01/dtlArtifacts.json",
  "title": "ADTLLOB Active Directory Domain Join",
  "publisher": "Microsoft",
  "description": "Joins a Windows VM to an Active Directory Domain. Requires that the Windows operating system can resolve the domain name and domain controller via DNS.",
  "tags": [
    "Windows"
  ],
   "parameters": {
        "Domain": {
            "type": "string",
            "displayName": "New Domain name",
            "description": "Enter full Name of the domain to join, example warp.local",
            "allowEmpty": false
        },
	"UserName": {
            "type": "string",
            "displayName": "UserName",
            "description": "Enter domain user account, example TestUser",
            "allowEmpty": false
        },
	"Password": {
            "type": "securestring",
            "displayName": "Password",
            "description": "Enter Password",
            "allowEmpty": false
        }
},
  "iconUri": "",
  "targetOsType": "Windows",
  "runCommand": {
    "commandToExecute": "[concat('powershell.exe -ExecutionPolicy bypass -File AddVMtoDomain.ps1', ' -Domain ', parameters('Domain'), ' -UserName ', parameters('UserName'), ' -Password ', parameters('Password'))]"
  }
}
